
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>🎓 تهانينا للتخرج</title>
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      background: #fff8f0;
      text-align: center;
      padding: 40px;
      overflow-x: hidden;
    }

    .button {
      padding: 15px 25px;
      font-size: 18px;
      background: #4caf50;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin: 10px;
    }

    .hidden {
      display: none;
    }

    #motivationalBar {
      background: #ffe0b2;
      padding: 15px;
      margin: 30px 0;
      font-size: 20px;
      border-radius: 10px;
      position: relative;
      height: 50px;
      overflow: hidden;
      direction: rtl;
    }

    #motivationalBar span {
      position: absolute;
      white-space: nowrap;
      animation: scroll 15s linear infinite;
      font-weight: bold;
      font-size: 22px;
      right: -100%;
    }

    @keyframes scroll {
      from { right: -100%; }
      to { right: 100%; }
    }

    .certificate {
      margin-top: 30px;
    }

    canvas {
      position: fixed;
      top: 0;
      left: 0;
      pointer-events: none;
      z-index: 999;
    }
  </style>
</head>
<body>

  <audio id="celebrationSound" src="https://www.fesliyanstudios.com/play-mp3/387" preload="auto"></audio>
  <canvas id="confetti-canvas"></canvas>

  <h1>مبروك يا <span id="studentName">[الاسم]</span> 🎉</h1>
  <p>رحلتك كانت ملهمة! مستعدة للمفاجأة؟</p>

  <button id="startButton" class="button" onclick="startSurprise()">ابدأ المفاجأة 🎁</button>

  <div id="gameSection" class="hidden">
    <p>حل اللغز: شيء كلما أخذت منه كبر؟</p>
    <input type="text" id="riddleAnswer" placeholder="إجابتك">
    <button class="button" onclick="checkAnswer()">تحقق</button>
    <p id="riddleFeedback"></p>
  </div>

  <div id="motivationalBar" class="hidden"><span id="motivationText"></span></div>

  <div id="certificateSection" class="hidden">
    <button class="button" onclick="showCertificate()">عرض الشهادة 🎓</button>
  </div>

  <div class="certificate hidden" id="certificateBox">
    <img src="../certif/habiba.jpg" alt="شهادتك" style="width: 500px; border-radius: 12px; border: 2px solid #444;">
    <div style="margin-top: 20px;">
      <button class="button" onclick="downloadCert()">تحميل الشهادة</button>
      <button class="button" onclick="shareCert()">مشاركة الشهادة</button>
    </div>
  </div>

  <!-- لعبة النجوم -->
  <div style="margin: 30px auto; width: 100%; max-width: 600px; height: 400px; border: 3px solid #ccc; border-radius: 15px; overflow: hidden;">
    <iframe src="game.html" width="100%" height="100%" style="border: none;"></iframe>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
  <script>
    const name = "حبيبة";
    const gender = "female";

    document.getElementById("studentName").innerText = name;

    window.addEventListener('click', () => {
      const sound = document.getElementById("celebrationSound");
      if (sound.paused) sound.play();
    }, { once: true });

    window.onload = () => {
      confettiBurst();
    };

    function startSurprise() {
      document.getElementById("startButton").style.display = "none";
      document.getElementById("gameSection").classList.remove("hidden");
    }

    function checkAnswer() {
      const answer = document.getElementById("riddleAnswer").value.trim();
      const feedback = document.getElementById("riddleFeedback");
      if (answer === "الحفرة" || answer === "الفراغ " || answer === "انجازاتك") {
        feedback.innerText = "إجابة صحيحة 👏";
        showMotivation();
      } else {
        feedback.innerText = "مش قريب! حاول تاني 😊";
      }
    }

    function showMotivation() {
      document.getElementById("gameSection").classList.add("hidden");
      document.getElementById("motivationalBar").classList.remove("hidden");
      document.getElementById("certificateSection").classList.remove("hidden");

      let messages = gender === "female"
        ? [`يا ${name}، أنتي قدها 💪`, "إبداعك بيبهرنا!", "دي كانت البداية!"]
        : [`يا ${name}، أنت قدها 💪`, "إبداعك بيبهرنا!", "دي كانت البداية!"];

      document.getElementById("motivationText").innerText = messages.join(" — ");
    }

    function showCertificate() {
      document.getElementById("certificateBox").classList.remove("hidden");
      confettiBurst();
    }

    function confettiBurst() {
      confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
    }

    function downloadCert() {
      const link = document.createElement('a');
      link.href = '/certif/certif/habiba.jpg';
      link.download = '../certif/habiba.jpg';
      link.click();
    }

    function shareCert() {
      const certUrl = window.location.origin + "/certif/certif/habiba.jpg";
      if (navigator.share) {
        navigator.share({
          title: '🎓 شهادتي',
          text: `أنهيت رحلتي التعليمية! هذه شهادتي، شجعوني! 🎉`,
          url: certUrl
        }).catch((err) => {
          alert("حدث خطأ أثناء المشاركة: " + err.message);
        });
      } else {
        alert("جهازك لا يدعم المشاركة التلقائية. شارك الشهادة يدويًا.");
      }
    }
  </script>
</body>
</html>
